<tr data-booking-id="{{ booking.id }}">
  {% if not edit_queue_entry_mode %}
    {% partialdef place_status inline %}
      <td {% if booking.rank_info.cutoff_state == "A" %}
            class="to-accept"
          {% endif %}
      >{{ booking.rank_info.cutoff_state }}</td>
    {% endpartialdef %}
    <td>{{ booking.first_name }}</td>
    <td>{{ booking.last_name }}</td>
    <td>{% if booking.queue_entry.officer_child %}✔️{% endif %}</td>
    <td>{{ booking.rank_info.queue_position_rank }}</td>
    <td>{{ booking.rank_info.previous_attendance_score }}</td>
    <td>{% if booking.queue_entry.first_timer_allocated %}✔️{% endif %}</td>
    <td>{% if booking.rank_info.in_previous_year_waiting_list %}✔️{% endif %}</td>
    <td>{{ booking.queue_entry.tiebreaker_display }}</td>
    <td>
      <input
        type="submit" name="edit-queue-entry" value="Edit queue details"
        hx-post="."
        hx-vals='{"booking_id": "{{ booking.id }}"}'
        hx-swap="outerHTML"
      >
      &nbsp;
      <a href="{% url 'admin:bookings_booking_change' booking.id %}" target="_blank">Edit booking</a>

    </td>
  {% else %}
    {% partial place_status %}
    <td>{{ booking.first_name }}</td>
    <td>{{ booking.last_name }}</td>
    <td>
      <label>Officer child: {{ form.officer_child }}</label>
    </td>
    <td>{{ booking.rank_info.queue_position_rank }}</td>
    <td>{{ booking.rank_info.previous_attendance_score }}</td>
    <td>
      <label>First timer: {{ form.first_timer_allocated }}</label>
    </td>
    <td>{% if booking.rank_info.in_previous_year_waiting_list %}✔️{% endif %}</td>
    <td>{{ booking.queue_entry.tiebreaker_display }}</td>
    <td>
      <input
        type="submit" name="save-queue-entry" value="Save"
        hx-post="."
        hx-swap="outerHTML"
        hx-vals='{"booking_id": {{ booking.id }} }'
        hx-include="closest tr"
      >
      <input
        type="submit" name="cancel-edit-queue-entry" value="Cancel"
        hx-post="."
        hx-swap="outerHTML"
      >
      {% if form.errors %}
        <br>
        {% for k, error in form.errors.items %}
          {{ error }}
        {% endfor %}
      {% endif %}
    </td>
  {% endif %}
</tr>
