{% extends "cciw/officers/base.html" %}

{% load static %}
{% load compress %}

{% block title %}Manage DBSs {{ year }} | CCIW Officers{% endblock %}

{% block extrahead %}
  {{ block.super }}
  {% compress js %}
    <script type="text/javascript" src="{% static "js/manage_dbss.js" %}"></script>
  {% endcompress %}
{% endblock %}

{% block content %}
  <h1>Manage DBSs</h1>

  <p>This page shows all officers on camps, year {{ year }}, and their status
    regarding needing DBS checks.</p>

  <p>For officers needing DBSs:</p>

  <ul>
    <li>Use 'Show address' to view the officer's address (from application form)</li>
    <li>Use the buttons in the 'Manage' column to indicate you've physically sent them a DBS form to fill in.</li>
    <li>Officers requiring attention are <span class="requires_action">highlighted</span>.</li>
  </ul>

  <p>To enter information for DBSs that have been <em>completed</em>, use the
    <a href="{% url 'admin:officers_dbscheck_changelist' %}" target="_blank">DBS Disclosures admin</a>.</p>

  <div id='id_campselector'>
    <form action="." method="GET">
      <p>Select camps: {% for camp in camps %}
        <label><input type="checkbox" name="camp" value="{{ camp.slug_name }}"
                      {% if camp in selected_camps %}checked{% endif %}> {{ camp.slug_name }}</label>&nbsp;&nbsp;
      {% endfor %} <input type="submit" value="Update page">
      </p>
    </form>
  </div>

  <table id="id_officer_table"
         data-url="{% url 'cciw-officers-manage_dbss' year=year %}"
         >
    <thead>
      <tr>
        <th>Name</th>
        <th>Camps</th>
        <th>Application form</th>
        <th>DBS status</th>
        <th>Info and actions</th>
      </tr>
    </thead>
    <tbody>
      {% include 'cciw/officers/manage_dbss_rows_inc.html' %}
    </tbody>
  </table>
{% endblock %}
