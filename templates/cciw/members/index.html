{% extends "cciw/standard" %}
{% load view_extras %}
{% load forums %}
{% block content %}
	<form method='get' action='/members/'>
		<p>
		<label>Search:
		<input type='text' name='search' id='search' value="{{ pagevars.request.search|escape }}" onfocus="javascript:this.value='';" /></label><br/>
		<label>Online users only: <input type="checkbox" name="online" value="1"
			{% if pagevars.request.online %}
				checked="checked"
			{% endif %} /></label> <input type="submit" name="go" value="Go" />
		</p>
		{% forward_query_param "order" %}
	</form>
	{% if object_list %}
	<div class="paging">{% paging_control %}</div>
	<table class="topheaders">
		<tr>
			<th scope="col">Icon</th>
			<th scope="col">Member name&nbsp;{% sorting_control "aun" "dun" %}</th>
			<th scope="col">'Real' name&nbsp;{% sorting_control "arn" "drn" %}</th>
			<th scope="col">Comments</th>
			<th scope="col">Joined&nbsp;{% sorting_control "adj" "ddj" %}</th>
			<th scope="col">Last seen&nbsp;{% sorting_control "als" "dls" %}</th>
		</tr>

		{% for member in object_list %}
		<tr>
			<td> {% if member.icon %}
				{{ member.icon_image }}
			     {% endif %}
			</td>
			<td><a href="{{ member.get_absolute_url }}">{{ member.user_name }}</a></td>
			<td>{{ member.real_name|escape }}</td>
			<td>{{ member.comments|bb2html }}</td>
			<td>
			{% if member.date_joined %}
				{{ member.date_joined|date:"d M Y" }}
			{% endif %}
			</td>
			<td>
			{% if member.last_seen %}
				{{ member.last_seen|date:"d M Y h:i" }}
			{% endif %}
			</td>
		</tr>
		{% endfor %}
	</table>
	<div class="paging">{% paging_control %}</div>
	{% else %}
	<p>No members found.</p>
	{% endif %}

{% endblock %}